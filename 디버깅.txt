# 로컬루언서 미나 - 디버깅 로그

## 2025-06-22
### 이슈 1: Next.js 개발 서버 실행 문제
- **문제 상황**:
  - `npm run dev` 실행 시 `styled-jsx` 관련 오류 발생
  - PowerShell 실행 정책으로 인해 스크립트 실행이 차단됨
- **해결 방법**:
  1. `npm install --legacy-peer-deps`로 의존성 재설치
  2. `styled-jsx` 패키지 재설치
  3. CMD 프롬프트에서 개발 서버 실행
- **결과**:
  - 개발 서버 정상 실행 확인
  - 웹사이트 접속 가능해짐

### 이슈 2: Supabase 로그인 실패
- **문제 상황**:
  - 로그인 시 400 Bad Request 오류 발생
  - 오류 메시지: `email_not_confirmed`
- **원인 분석**:
  - 이메일 인증이 완료되지 않은 계정으로 로그인 시도
- **해결 방법**:
  1. 등록된 이메일로 전송된 인증 링크 클릭
  2. Supabase 대시보드에서 이메일 확인 상태 확인
  3. 인증 후 재로그인 시도
- **결과**:
  - 이메일 인증 완료 후 정상 로그인 확인

### 이슈 3: 환경 변수 누락
- **문제 상황**:
  - Supabase 관련 환경 변수가 설정되지 않아 초기 로딩 실패
- **해결 방법**:
  1. `.env.local` 파일 생성
  2. `NEXT_PUBLIC_SUPABASE_URL` 및 `NEXT_PUBLIC_SUPABASE_ANON_KEY` 설정
  3. 개발 서버 재시작
- **결과**:
  - 환경 변수 로드 확인
  - Supabase 연결 정상화

### 마이크와 카메라 접근 문제 해결

#### 이슈 1: 화상 통화 시 카메라/마이크 접근 실패
- **문제 상황**:
  - AI 가이드 화상 통화 기능에서 카메라와 마이크 접근이 되지 않음
  - 사용자에게 충분한 오류 안내가 제공되지 않음
  - 권한 거부 시 대체 UI가 없음
- **해결 방법**:
  1. 권한 확인 및 디바이스 체크 로직 추가
  ```typescript
  const checkMediaPermissions = async () => {
    const result = { video: false, audio: false };
    // navigator.permissions API 사용
    // getUserMedia 권한 요청 시도
    return result;
  };
  ```
  2. 상세한 오류 메시지 제공
  ```typescript
  if (error.name === 'NotAllowedError') {
    toast.error('카메라/마이크 접근 권한이 거부되었습니다.');
  } else if (error.name === 'NotFoundError') {
    toast.error('카메라 또는 마이크를 찾을 수 없습니다.');
  }
  ```
  3. Windows 설정 바로가기 버튼 추가
  ```typescript
  <Button onClick={() => window.open('ms-settings:privacy-webcam')}>
    Windows 권한 설정 열기
  </Button>
  ```
- **결과**:
  - 권한 문제 발생 시 사용자에게 명확한 안내 제공
  - 다양한 오류 상황에 대한 구체적인 해결 방법 안내
  - 권한 설정으로 바로 이동할 수 있는 UX 개선

#### 이슈 2: 음성 녹음 시 마이크 접근 실패
- **문제 상황**:
  - AI 가이드 음성 채팅 기능에서 마이크 접근 실패
  - 단순한 오류 메시지만 표시되어 사용자가 해결 방법을 알 수 없음
- **해결 방법**:
  1. 마이크 권한 체크 로직 추가
  2. 권한 거부 시 상세한 안내 메시지 제공
  3. 다양한 오류 상황(권한 거부, 장치 없음, 장치 사용 중)에 맞는 메시지 표시
- **결과**:
  - 마이크 권한 문제 발생 시 사용자에게 명확한 안내 제공
  - 권한 설정 방법에 대한 구체적인 안내 제공

#### 이슈 3: 웹캠으로 촬영 기능 미구현
- **문제 상황**:
  - 포토 포스트카드 페이지에서 웹캠 촬영 기능이 구현되지 않음
  - "웹캠으로 촬영 (구현 예정)" 버튼만 표시되고 기능 없음
- **해결 방법**:
  1. 웹캠 활성화/비활성화 기능 구현
  ```typescript
  const startWebcam = async () => {
    // 카메라 권한 확인
    // getUserMedia로 비디오 스트림 요청
    // 비디오 요소에 스트림 연결
  };
  ```
  2. 사진 촬영 기능 구현
  ```typescript
  const capturePhoto = () => {
    // Canvas API를 활용한 현재 프레임 캡처
    // 이미지 데이터 URL 생성
  };
  ```
  3. 권한 체크 및 오류 처리 로직 추가
- **결과**:
  - 웹캠으로 사진 촬영 기능 완전히 구현
  - 사용자 친화적인 UI 및 오류 메시지 제공
  - 카메라 권한 문제 발생 시 해결 방법 안내

## 2025-06-22
### 장바구니 시스템 구현 과정에서 발생한 이슈들

#### 이슈 1: 클라이언트/서버 컴포넌트 분리 필요
- **문제 상황**:
  - 상품 상세 페이지가 서버 컴포넌트로 구현되어 있어 장바구니 상태 관리 불가
  - useState, useEffect 등 클라이언트 훅 사용 불가
- **해결 방법**:
  1. `app/shop/[id]/page.tsx`를 클라이언트 컴포넌트로 변경 (`'use client'` 추가)
  2. 서버 사이드 데이터 페칭을 클라이언트 사이드로 변경
  3. useEffect를 사용한 비동기 데이터 로딩 구현
- **결과**:
  - 장바구니 기능 정상 연동
  - 상품 옵션 선택 및 수량 조절 기능 구현 가능

#### 이슈 2: 타입 정의 누락
- **문제 상황**:
  - CartItem, Order 인터페이스가 정의되지 않아 TypeScript 오류 발생
- **해결 방법**:
  1. `lib/data.ts`에 CartItem 및 Order 인터페이스 추가
  2. 장바구니 관련 타입 정의 완료
- **결과**:
  - TypeScript 컴파일 오류 해결
  - 타입 안정성 확보

#### 이슈 3: 개발 서버 실행 확인
- **상황**:
  - 장바구니 시스템 구현 후 개발 서버 정상 실행 테스트
- **결과**:
  - Next.js 15.2.4 정상 실행 (localhost:3000)
  - 홈페이지 및 쇼핑 페이지 접근 가능 확인
  - 일부 이미지 파일 404 오류 발견 (mina-snu-jacket.png)
- **참고사항**:
  - 이미지 파일 누락은 장바구니 기능에 영향 없음
  - 추후 이미지 파일 정리 필요

#### 이슈 4: 프로덕션 빌드 오류 (코드 최적화 과정)
- **문제 상황**:
  - `npm run build` 실행 시 파일 시스템 권한 오류 발생
  - API 라우트 파일 관련 EISDIR 오류
  - TypeScript 컴파일 오류 (Checkbox, QA 타입, react-hook-form)
- **해결 방법**:
  1. 개발 서버 프로세스 종료 (`taskkill /f /im node.exe`)
  2. .next 캐시 디렉토리 삭제 (`rmdir /s /q .next`)
  3. Checkbox 컴포넌트 onCheckedChange 타입 수정
  4. QA 페이지 타입 통일 (ServerQA → QA 변환 로직 추가)
  5. form.tsx 컴포넌트 임시 비활성화 (react-hook-form 의존성 문제)
- **결과**:
  - TypeScript 컴파일 오류 모두 해결
  - 개발 서버 정상 실행 확인
- **향후 개선 사항**:
  - react-hook-form 의존성 충돌 해결
  - date-fns 버전 호환성 문제 해결
  - form.tsx 컴포넌트 재활성화

## 2025-06-22
### 사진엽서 AI 이미지 합성 구현 과정에서 발생한 이슈들

#### 이슈 1: Fal.ai API 키 설정 및 환경 변수 관리
- **문제 상황**:
  - 개발 환경에서 API 키 없이 기능 테스트 필요
  - 환경 변수 설정 방법 및 보안 고려사항
- **해결 방법**:
  1. `.env.local` 파일에 API 키 저장
  2. 개발 환경에서는 목업 이미지 제공
  3. 환경 변수 존재 여부에 따른 분기 처리
```typescript
// 개발 환경에서 목업 응답 제공
if (!process.env.FAL_KEY) {
  return NextResponse.json({
    success: true,
    imageUrl: '/images/mock-postcard.jpg',
    isDevelopmentMode: true,
    message: '개발 환경에서는 목업 이미지를 제공합니다.'
  })
}
```
- **결과**: API 키 없이도 전체 플로우 테스트 가능

#### 이슈 2: 이미지 업로드 및 Base64 변환 처리
- **기술적 도전**:
  - 파일 크기 제한 (5MB)
  - 지원 형식 검증 (JPEG, PNG, WebP)
  - Base64 인코딩 성능 최적화
- **해결 방법**:
  1. FileReader API를 활용한 클라이언트 사이드 변환
  2. 파일 크기 및 형식 사전 검증
  3. 업로드 진행률 표시로 UX 개선
```typescript
const validateFile = (file: File): string | null => {
  if (file.size > 5 * 1024 * 1024) {
    return '파일 크기는 5MB 이하여야 합니다.'
  }
  if (!['image/jpeg', 'image/png', 'image/webp'].includes(file.type)) {
    return '지원되는 형식: JPEG, PNG, WebP'
  }
  return null
}
```
- **결과**: 안정적인 이미지 처리 및 사용자 친화적 에러 처리

#### 이슈 3: 프롬프트 엔지니어링 최적화
- **도전 과제**:
  - 한국 경주 관광지의 특징을 정확히 반영
  - 일관된 품질의 이미지 생성
  - 사용자 업로드 이미지와의 자연스러운 합성
- **구현 방법**:
  1. 관광지별 상세한 프롬프트 작성
  2. 스타일 키워드 조합 최적화
  3. 네거티브 프롬프트로 품질 제어
```typescript
const locationPrompts = {
  bulguksa: "ancient Korean Buddhist temple, traditional Korean architecture, stone pagodas, autumn colors, UNESCO World Heritage site",
  seokguram: "ancient stone Buddha statue, cave temple, mountain setting, spiritual atmosphere, Korean Buddhist art"
}
```
- **결과**: 경주 관광지 특성이 잘 반영된 고품질 이미지 생성

## 2025-06-21
### AI 가이드 실시간 채팅 기능 구현 과정에서 발생한 이슈들

#### 이슈 1: OpenAI API 패키지 설치 실패
- **문제 상황**:
  - `npm install openai` 실행 시 date-fns 버전 충돌 발생
  - peer dependency 경고로 설치 실패
- **에러 메시지**:
```
npm ERR! peer dep missing: date-fns@^2.0.0, required by openai@4.28.0
```
- **해결 방법**:
  1. `--legacy-peer-deps` 플래그 사용
  2. package.json에서 의존성 버전 확인
```bash
npm install openai --legacy-peer-deps
```
- **결과**: OpenAI 패키지 성공적으로 설치 및 사용

#### 이슈 2: AI 페르소나 설계 및 프롬프트 최적화
- **기술적 고려사항**:
  - 일관된 캐릭터 유지
  - 경주 전문 지식 반영
  - 자연스러운 한국어 대화
- **구현 내용**:
  1. 상세한 페르소나 시스템 메시지 작성
  2. 대화 히스토리 관리로 컨텍스트 유지
  3. 이모지 활용으로 친근감 증대
```typescript
const MINA_PERSONA = `
당신은 '미나'라는 이름의 AI 인플루언서입니다.
- 성격: 밝고 친근하며 도움을 주고 싶어하는 20대 여성
- 전문 분야: 경주 여행 가이드 (역사, 문화, 맛집, 숙박)
- 말투: 친근하고 자연스러운 한국어, 적절한 이모지 사용
- 목표: 사용자에게 최고의 경주 여행 경험 제공
`
```
- **결과**: 자연스럽고 전문적인 AI 가이드 대화 구현

#### 이슈 3: 음성 인식 및 합성 기능 구현
- **기술적 도전**:
  - 브라우저별 MediaRecorder API 지원 차이
  - 음성 권한 요청 및 에러 처리
  - 실시간 음성 피드백 구현
- **구현 방법**:
  1. MediaRecorder API를 활용한 음성 녹음
  2. OpenAI Whisper API를 통한 STT 처리
  3. Web Speech API를 통한 TTS 구현
  4. 권한 요청 및 에러 처리 강화
- **결과**:
  - 음성 메시지 송수신 기능 구현
  - 다양한 브라우저 환경 지원
  - 사용자 권한 거부 시 적절한 안내

#### 이슈 4: 화상 통화 기능 구현
- **기술적 도전**:
  - WebRTC getUserMedia API 활용
  - 카메라/마이크 권한 동시 요청
  - 모바일 환경에서의 제약사항
- **해결 방법**:
  1. 단계별 권한 요청 구현
  2. 권한 거부 시 대체 UI 제공
  3. 반응형 화상통화 인터페이스 구현
- **결과**:
  - 실시간 화상통화 기능 구현 완료
  - 모바일/데스크톱 환경 모두 지원

#### 이슈 5: 실시간 채팅 UI/UX 최적화
- **개선 사항**:
  - 카카오톡 스타일 채팅 인터페이스 구현
  - 타이핑 인디케이터 추가
  - 메시지 상태 표시 (전송/읽음)
  - 자동 스크롤 및 포커스 관리
- **구현 내용**:
  1. 메시지 버블 디자인 최적화
  2. 시간 표시 및 메시지 그룹핑
  3. 로딩 상태 및 에러 처리
  4. 키보드 단축키 지원 (Enter 전송)
- **결과**:
  - 직관적이고 친숙한 채팅 경험 제공
  - 실제 메신저 수준의 사용성 구현

## 2025-06-22
### AI 가이드 구글맵/어스 연동 구현 과정에서 발생한 이슈들

#### 이슈 1: Google Maps API 개발 환경 설정
- **문제 상황**:
  - Google Maps API 키 없이 개발 환경에서 테스트 필요
  - API 키 설정 전 기능 구현 및 테스트 요구
- **해결 방법**:
  1. 목업 지도 컴포넌트 구현
  2. 실제 API 연동을 위한 구조 설계
  3. 환경 변수 감지 후 목업/실제 지도 분기 처리
- **결과**:
  - API 키 없이도 개발 가능한 환경 구축
  - 실제 API 연동 시 원활한 전환 가능

#### 이슈 2: 경주 관광지 데이터 구조화
- **고려 사항**:
  - 관광지별 상세 정보 체계화
  - 카테고리별 분류 및 마커 아이콘 설정
  - 사용자 위치 기반 거리 계산
- **구현 내용**:
  1. 주요 관광지 5곳 데이터 정리 (불국사, 석굴암, 안압지, 첨성대, 대릉원)
  2. 관광지별 좌표, 평점, 관람시간, 하이라이트, 팁 정보 추가
  3. 카테고리별 마커 아이콘 및 색상 설정
- **결과**:
  - 체계적인 관광지 정보 관리
  - 확장 가능한 데이터 구조 설계

#### 이슈 3: AI 채팅과 지도 연동
- **기능 설계**:
  - 지도에서 관광지 선택 시 AI 자동 응답
  - 채팅에서 관광지 언급 시 지도 포커스
  - 빠른 질문 버튼을 통한 상호작용
- **구현 방법**:
  1. 탭 기반 멀티 기능 UI 설계
  2. 상태 공유를 통한 컴포넌트 간 연동
  3. 컨텍스트 기반 AI 응답 생성
- **결과**:
  - 지도와 채팅의 자연스러운 연동
  - 사용자 경험 향상

#### 이슈 4: 가상 투어 페이지 재구성
- **개선 사항**:
  - 기존 정적 페이지에서 인터랙티브 가상 투어로 전환
  - 360도 가상 투어 플레이어 구현
  - VR 지원 및 음성 가이드 준비
- **구현 내용**:
  1. 투어별 상세 정보 및 평점 시스템
  2. 가상 투어 플레이어 UI 구현
  3. Google Earth 3D 투어 연동 준비
- **결과**:
  - 몰입감 있는 가상 투어 경험 제공
  - 향후 VR/AR 기능 확장 기반 마련

## 2024-12-19
### 관리자 대시보드 기본 구현 과정에서 발생한 이슈들

#### 이슈 1: 관리자 메인 대시보드 실시간 데이터 시뮬레이션
- **문제 상황**:
  - 실제 데이터베이스 없이 실시간 업데이트 효과 구현 필요
  - 정적 목업 데이터로는 관리자 도구의 실제 사용감 부족
- **해결 방법**:
  1. setInterval을 활용한 주기적 데이터 업데이트
  2. Math.random()을 이용한 자연스러운 변화 시뮬레이션
  3. 메모리 누수 방지를 위한 cleanup 함수 구현
```typescript
useEffect(() => {
  const interval = setInterval(() => {
    setStats(prev => ({
      ...prev,
      activeUsers: Math.max(0, prev.activeUsers + Math.floor(Math.random() * 6) - 3),
      totalViews: prev.totalViews + Math.floor(Math.random() * 5)
    }))
  }, 30000) // 30초마다 업데이트

  return () => clearInterval(interval)
}, [])
```
- **결과**:
  - 실제 운영 환경과 유사한 실시간 대시보드 구현
  - 관리자 도구의 실용성 확인 가능

#### 이슈 2: 콘텐츠 관리 시스템 통합 테이블 구현
- **기술적 고려사항**:
  - 브이로그, Q&A, 상품, 게시글 등 다양한 콘텐츠 타입 통합 관리
  - 타입별 다른 속성 (가격/재고, 조회수/좋아요 등) 처리
  - 고급 필터링 및 검색 기능 구현
- **해결 방법**:
  1. 공통 Content 인터페이스 설계 및 옵셔널 속성 활용
```typescript
interface Content {
  id: string
  type: 'vlog' | 'qa' | 'product' | 'post'
  title: string
  description?: string
  status: 'published' | 'draft' | 'scheduled' | 'archived'
  // 공통 속성들...
  price?: number      // 상품에만 해당
  stock?: number      // 상품에만 해당
  category?: string   // 타입별 카테고리
}
```
  2. 타입별 조건부 렌더링 및 필터링 로직 구현
  3. 복합 검색 (제목, 설명, 태그) 기능 구현
- **결과**:
  - 효율적인 통합 콘텐츠 관리 시스템 구현
  - 타입 안전성과 확장성 확보

#### 이슈 3: 사용자 관리 시스템 권한 체계 설계
- **복잡성 고려사항**:
  - 다층 권한 시스템 (관리자/운영자/VIP/일반)
  - 로그인 방식별 분류 (이메일/구글/네이버/카카오)
  - 사용자 상태 관리 (활성/비활성/정지/차단)
  - 사용자 활동 및 구매 통계 표시
- **해결 방법**:
  1. 역할 기반 접근 제어 (RBAC) 구조 설계
```typescript
interface User {
  id: string
  name: string
  email: string
  role: 'admin' | 'moderator' | 'user' | 'vip'
  status: 'active' | 'inactive' | 'suspended' | 'banned'
  provider: 'email' | 'google' | 'naver' | 'kakao'
  // 활동 통계
  totalOrders: number
  totalSpent: number
  totalViews: number
  totalLikes: number
  totalComments: number
}
```
  2. 권한별 배지 및 아이콘 시스템 구현
  3. 사용자 활동 통계 대시보드 구현
- **결과**:
  - 체계적인 사용자 관리 시스템 구현
  - 확장 가능한 권한 관리 구조 설계

#### 이슈 4: 관리자 사이드바 메뉴 확장
- **문제 상황**:
  - 기존 관리자 사이드바에 새로운 메뉴 추가 필요
  - 콘텐츠 관리, 사용자 관리 페이지 연결
- **해결 방법**:
  1. admin-sidebar.tsx에 새로운 메뉴 아이템 추가
  2. 적절한 아이콘 및 라우팅 설정
  3. 현재 페이지 하이라이트 기능 유지
- **결과**:
  - 직관적인 관리자 네비게이션 구현
  - 일관된 UI/UX 유지

#### 이슈 5: 대용량 데이터 처리 고려사항
- **향후 확장성 고려**:
  - 사용자 수 증가 시 테이블 성능 문제 예상
  - 콘텐츠 수 증가 시 페이지 로딩 시간 증가
- **현재 해결방안 및 향후 계획**:
  1. 현재는 목업 데이터로 성능 이슈 없음
  2. 향후 구현 예정 사항 문서화:
     - React Virtual 또는 react-window를 이용한 가상화
     - 서버사이드 페이지네이션
     - 무한 스크롤 구현
     - 인덱싱 및 데이터베이스 최적화
- **결과**:
  - 확장 가능한 아키텍처 설계
  - 성능 최적화 로드맵 수립

#### 이슈 6: 보안 및 권한 관리 고려사항
- **현재 상황**:
  - 개발 단계로 인증/권한 제한 미구현
  - 관리자 페이지 접근 제한 필요
- **향후 구현 계획**:
  1. 인증 미들웨어 구현
  2. 역할 기반 접근 제어 (RBAC)
  3. 세션 관리 및 토큰 검증
  4. 관리자 활동 로그 기록
  5. API 엔드포인트 보안 강화
- **결과**:
  - 보안 요구사항 명확화
  - 단계별 보안 강화 계획 수립

---

**마지막 업데이트**: 2024-12-19
**다음 우선순위**: 사용자 인증 시스템 구현
  2. OpenAI Whisper를 통한 STT 처리
  3. Web Speech API를 통한 TTS 구현
- **결과**:
  - 안정적인 음성 녹음/재생 기능 구현
  - 한국어 음성 인식 품질 확보

#### 이슈 4: WebRTC 화상 통화 기능 구현
- **기술적 도전**:
  - 실제 P2P 연결 없이 UI만 구현
  - 미디어 스트림 관리 및 권한 처리
  - 화상 통화 컨트롤 인터페이스 설계
- **구현 방법**:
  1. getUserMedia API를 통한 로컬 비디오 스트림
  2. 가상의 AI 비디오 오버레이 구현
  3. 비디오/오디오 토글 기능
  4. 통화 시작/종료 상태 관리
- **결과**:
  - 직관적인 화상 통화 UI 구현
  - 미디어 권한 처리 및 에러 핸들링
  - 향후 실제 WebRTC 연결 확장 가능

#### 이슈 5: 실시간 채팅 UI/UX 설계
- **사용자 경험 고려사항**:
  - 카카오톡 스타일의 친숙한 인터페이스
  - 메시지 타입별 구분 표시 (텍스트/음성)
  - 실시간 상태 표시 및 피드백
- **구현 내용**:
  1. 채팅 버블 스타일 메시지 UI
  2. 아바타 및 타임스탬프 표시
  3. 로딩 상태 및 타이핑 인디케이터
  4. 자동 스크롤 및 메시지 히스토리 관리
- **결과**:
  - 직관적이고 사용하기 쉬운 채팅 인터페이스
  - 모바일/데스크톱 반응형 최적화
  - 접근성 고려한 키보드 네비게이션

#### 이슈 6: 개발 환경 목업 시스템
- **필요성**:
  - OpenAI API 키 없이도 개발 테스트 가능
  - 다양한 응답 패턴 시뮬레이션
  - 에러 상황 처리 테스트
- **구현 방법**:
  1. 환경 변수 확인 후 목업 모드 자동 전환
  2. 랜덤 응답 풀을 통한 다양성 확보
  3. 음성 인식 목업 기능 제공
  4. 개발 모드 알림 메시지 표시
- **결과**:
  - 즉시 테스트 가능한 개발 환경 구축
  - 실제 API 연동 시 원활한 전환
  - 팀 개발 시 환경 설정 부담 최소화

#### 이슈 7: 개발 서버 포트 충돌 해결
- **문제 상황**:
  - 기본 포트 3000이 사용 중이어서 3001로 자동 변경
  - EPERM 권한 오류 발생하지만 서버는 정상 실행
- **해결 방법**:
  1. Next.js가 자동으로 사용 가능한 포트 탐지
  2. 권한 오류는 무시하고 기능 테스트 진행
- **결과**:
  - 개발 서버 정상 실행 (localhost:3001)
  - AI 채팅 기능 테스트 가능 상태
  - 모든 기능 정상 작동 확인

# 로컬루언서 미나 v2 디버깅 및 이슈 해결 기록

## 완료된 이슈 해결

### 1. 브이로그 상세 페이지 구현 관련 (2024-12-19)
**이슈**: 동적 라우팅 및 데이터 매핑 문제
**해결**: Next.js App Router의 동적 세그먼트 활용, 브이로그 데이터 구조 정리

### 2. 쇼핑몰 장바구니 상태 관리 (2024-12-19)
**이슈**: 새로고침 시 장바구니 데이터 손실
**해결**: localStorage 기반 영구 저장소 구현, useCart 훅 최적화

### 3. 사진엽서 AI 이미지 합성 API 연동 (2024-12-19)
**이슈 1**: Fal.ai API 응답 처리 및 에러 핸들링
**해결**: try-catch 블록과 상세한 에러 메시지 추가, 개발 환경 목업 제공

**이슈 2**: 이미지 업로드 크기 제한 및 형식 검증
**해결**: File API를 활용한 클라이언트 사이드 검증, Base64 변환 최적화

**이슈 3**: 실시간 진행률 표시 구현
**해결**: useState와 setInterval을 활용한 진행률 시뮬레이션

### 4. AI 가이드 실시간 채팅 기능 구현 (2024-12-19)
**이슈 1**: OpenAI 패키지 설치 실패
```bash
npm ERR! peer dep missing: date-fns@^2.0.0
```
**해결**: `--legacy-peer-deps` 플래그 사용하여 의존성 충돌 해결
```bash
npm install openai --legacy-peer-deps
```

**이슈 2**: 개발 서버 포트 충돌
```
Port 3000 is already in use
```
**해결**: Next.js가 자동으로 3001번 포트로 변경, 정상 동작 확인

**이슈 3**: 브라우저 마이크/카메라 권한 처리
**해결**: try-catch 블록으로 권한 거부 시 사용자 친화적 메시지 표시

**이슈 4**: WebRTC 화상 통화 구현 복잡성
**해결**: 기본적인 getUserMedia API 활용, 향후 WebRTC 라이브러리 도입 예정

### 5. AI 가이드 구글맵/어스 연동 구현 (2024-12-19)
**이슈 1**: Google Maps API 키 없이 개발 환경 테스트
**해결**: 환경 변수 확인 후 조건부 렌더링으로 목업 지도 컴포넌트 제공
```typescript
if (process.env.NODE_ENV === 'development' && !window.google) {
  // 목업 지도 컴포넌트 렌더링
}
```

**이슈 2**: Google Maps API 동적 로딩 처리
**해결**: script 태그 동적 생성 및 onload 이벤트 처리
```typescript
const script = document.createElement('script')
script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry`
script.onload = () => initializeMap()
```

**이슈 3**: 관광지 데이터와 지도 마커 연동
**해결**: 관광지 데이터 인터페이스 정의 및 마커 클릭 이벤트 처리

**이슈 4**: 가상 투어 플레이어 상태 관리
**해결**: 복합 상태 객체와 useEffect를 활용한 시간 진행 시뮬레이션

## 현재 진행 중인 이슈

### 1. 성능 최적화 필요
**문제**: 이미지 로딩 속도 및 번들 크기
**계획**: Next.js Image 컴포넌트 활용, 코드 스플리팅 적용

### 2. 타입스크립트 엄격 모드 적용
**문제**: 일부 컴포넌트에서 any 타입 사용
**계획**: 점진적으로 타입 정의 강화

### 3. 에러 바운더리 구현
**문제**: 예상치 못한 에러 발생 시 앱 크래시
**계획**: React Error Boundary 컴포넌트 구현

## 향후 예상 이슈 및 대응 방안

### 1. 데이터베이스 연동
**예상 이슈**: Supabase RLS 정책 설정 및 실시간 구독
**대응 방안**: 단계적 마이그레이션, 철저한 테스트

### 2. 배포 환경 설정
**예상 이슈**: 환경 변수 관리, CORS 설정
**대응 방안**: Vercel 환경 변수 설정, API 도메인 화이트리스트

### 3. 모바일 최적화
**예상 이슈**: 터치 인터페이스, 반응형 레이아웃
**대응 방안**: 모바일 퍼스트 디자인, 터치 이벤트 처리

## 디버깅 도구 및 방법

### 1. 개발 도구 활용
- **Chrome DevTools**: 네트워크 탭으로 API 응답 확인
- **React Developer Tools**: 컴포넌트 상태 및 props 디버깅
- **Next.js DevTools**: 서버 사이드 렌더링 디버깅

### 2. 로깅 전략
```typescript
// 개발 환경에서만 로깅
if (process.env.NODE_ENV === 'development') {
  console.log('디버깅 정보:', data)
}
```

### 3. 에러 처리 패턴
```typescript
try {
  // API 호출
} catch (error) {
  console.error('상세 에러:', error)
  toast.error('사용자 친화적 메시지')
}
```

## 성능 모니터링

### 1. 번들 분석
```bash
npm run build
npm run analyze
```

### 2. 라이트하우스 점수 추적
- **Performance**: 목표 90+
- **Accessibility**: 목표 95+
- **Best Practices**: 목표 90+
- **SEO**: 목표 90+

### 3. 실시간 에러 모니터링
- **계획**: Sentry 또는 LogRocket 도입 예정

## 코드 품질 관리

### 1. ESLint 설정 강화
```json
{
  "extends": ["next/core-web-vitals", "@typescript-eslint/recommended"],
  "rules": {
    "no-console": "warn",
    "@typescript-eslint/no-unused-vars": "error"
  }
}
```

### 2. Prettier 코드 포맷팅
```json
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

### 3. 커밋 훅 설정
```json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  }
}
```

## 보안 고려사항

### 1. API 키 보안
- 환경 변수로 민감 정보 관리
- 클라이언트 사이드에서 서버 키 노출 방지

### 2. 입력값 검증
- 파일 업로드 시 타입 및 크기 검증
- SQL 인젝션 방지를 위한 파라미터화 쿼리

### 3. CORS 정책
- API 엔드포인트별 적절한 CORS 헤더 설정

이러한 체계적인 디버깅 과정을 통해 안정적이고 확장 가능한 애플리케이션을 구축하고 있습니다.
